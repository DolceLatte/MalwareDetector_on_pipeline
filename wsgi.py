# wsgi.py
import torch
from smart_getenv import getenv

from app.classifier import Classifier
from app import create_app

use_cuda = torch.cuda.is_available()

file = getenv("FILE",default="./model/detector_sectionInfo_allData.prm")
params = torch.load(file,map_location=torch.device('cpu'))
classifier = Classifier(params)

app = create_app(classifier)
app.run(host='0.0.0.0', port=8000, debug=True)